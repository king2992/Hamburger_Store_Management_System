<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="pos">
	<select id="getList" resultType="Menu">
		SELECT * FROM  menu
	</select>
	<delete id="pDelete">
		DELETE FROM menu WHERE menu_id=#{menuId}
	</delete>
	<insert id="add" parameterType="Menu">
		INSERT INTO menu (menu_name, menu_price, menu_category, menu_img, data_id)
		VALUES (#{menuName},#{menuPrice},#{menuCategory},#{menuImg},#{dataId})
	</insert>
	
	<select id="item" resultType="Menu">
		SELECT * FROM menu WHERE menu_id=#{menuId}
	</select>
	
	<insert id="orders" parameterType="map">
		INSERT INTO orders(reg_date, pay_total, reg_time  )
		VALUES(  #{regDate}, #{ payTotal },#{regTime} ) 
	</insert>
	
	<insert id="orderMenuAdd" parameterType="map">
		<selectKey resultType="int" keyProperty="orderId" order="BEFORE">
			select max(order_id) from orders
		</selectKey>
		insert into orders_menu_list(order_id,menu_name, menu_cnt)
		values (#{orderId}, #{menuName}, #{menuCnt})
	</insert>
	<select id="ordersList" resultType="Orders">
		select * from orders order by order_id desc
	</select>
	<select id="reservedListCheck" resultType="ordersMenuList">
		select * from orders_menu_list where order_id = #{orderId}
	</select>
	<select id="dateSort" resultType="Orders">
		select * from orders where reg_date = #{regDate} order by order_id desc
	</select>
</mapper>